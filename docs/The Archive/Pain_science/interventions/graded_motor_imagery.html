<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>YK Lab - Graded Motor Imagery</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../..//images/icons8-brain-64.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">YK Lab</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../The Archive/archive_index.html" rel="" target="">
 <span class="menu-text">Archive</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../guide.html" rel="" target="">
 <span class="menu-text">Guide</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../journal club index.html" rel="" target="">
 <span class="menu-text">Journal Club</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../contact.html" rel="" target="">
 <span class="menu-text">Contact</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#mechanism-of-graded-motor-imagery" id="toc-mechanism-of-graded-motor-imagery" class="nav-link" data-scroll-target="#mechanism-of-graded-motor-imagery">Mechanism of Graded Motor Imagery</a></li>
  <li><a href="#crps" id="toc-crps" class="nav-link" data-scroll-target="#crps">CRPS</a>
  <ul class="collapse">
  <li><a href="#why-does-crps-benefit-from-gmi" id="toc-why-does-crps-benefit-from-gmi" class="nav-link" data-scroll-target="#why-does-crps-benefit-from-gmi">Why Does CRPS benefit from GMI?</a></li>
  </ul></li>
  <li><a href="#strauss-et-al.-2021" id="toc-strauss-et-al.-2021" class="nav-link" data-scroll-target="#strauss-et-al.-2021">Strauss et al.&nbsp;2021</a>
  <ul class="collapse">
  <li><a href="#design" id="toc-design" class="nav-link" data-scroll-target="#design">Design</a></li>
  <li><a href="#gmi" id="toc-gmi" class="nav-link" data-scroll-target="#gmi">GMI</a></li>
  <li><a href="#objective-measures" id="toc-objective-measures" class="nav-link" data-scroll-target="#objective-measures">Objective measures</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a>
  <ul class="collapse">
  <li><a href="#crps-vs-unaffected-pts-at-baseline" id="toc-crps-vs-unaffected-pts-at-baseline" class="nav-link" data-scroll-target="#crps-vs-unaffected-pts-at-baseline">CRPS vs unaffected pts at baseline:</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Graded Motor Imagery</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliations</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Nathaniel Yomogida </p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Doctor of Physical Therapy
          </p>
        <p class="affiliation">
            B.S. in Kinesiology
          </p>
      </div>
      <div class="quarto-title-meta-contents">
    <p class="author">Chloë Kerstein </p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Doctor of Physical Therapy
          </p>
        <p class="affiliation">
            B.S. in Neuroscience
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  

</header>

<section id="overview" class="level1">
<h1>Overview</h1>
<p>“Sequentially activating motor networks in such a way that movement and pain are unpaired<span class="citation" data-cites="limakatsoEfficacyGradedMotor2023"><sup><a href="#ref-limakatsoEfficacyGradedMotor2023" role="doc-biblioref">1</a></sup></span>.” For example, a person could move their non-affected arm near a mirror so it appears that both their arms are moving symmetrically. This belief that their arm is moving coupled with the absence of pain will help the patient to begin to separate pain from movement.</p>
</section>
<section id="mechanism-of-graded-motor-imagery" class="level1">
<h1>Mechanism of Graded Motor Imagery</h1>
<ul>
<li>Gradually helps pt move affected limb<span class="citation" data-cites="straussGradedMotorImagery2021"><sup><a href="#ref-straussGradedMotorImagery2021" role="doc-biblioref">2</a></sup></span></li>
<li>Anticipation of pain and avoidance of movement can be treated in a fear avoidance way and treat like a phobia w exposure therapy<span class="citation" data-cites="straussGradedMotorImagery2021"><sup><a href="#ref-straussGradedMotorImagery2021" role="doc-biblioref">2</a></sup></span></li>
<li>Gradually increasing movement provides more pain free movement experiences, resulting in the extinction of conditioned response (pain due to anticipation of pain)<span class="citation" data-cites="straussGradedMotorImagery2021"><sup><a href="#ref-straussGradedMotorImagery2021" role="doc-biblioref">2</a></sup></span></li>
<li>Can be done implicitly or explicitly
<ul>
<li>Implicit: mentally doing mvmt<span class="citation" data-cites="straussGradedMotorImagery2021"><sup><a href="#ref-straussGradedMotorImagery2021" role="doc-biblioref">2</a></sup></span></li>
<li>Explicit: mvmt imagination and mvmt observation (mirror therapy of mirrored healthy side)<span class="citation" data-cites="straussGradedMotorImagery2021"><sup><a href="#ref-straussGradedMotorImagery2021" role="doc-biblioref">2</a></sup></span></li>
</ul></li>
</ul>
</section>
<section id="crps" class="level1">
<h1>CRPS</h1>
<p>CRPS is a form of chronic neuropathic pain characterized by unbearable burning or stinging pain that is difficult to treat<span class="citation" data-cites="straussGradedMotorImagery2021"><sup><a href="#ref-straussGradedMotorImagery2021" role="doc-biblioref">2</a></sup></span>. CRPS is associated with somatosensory, motor, autonomic dysfunctions<span class="citation" data-cites="straussGradedMotorImagery2021"><sup><a href="#ref-straussGradedMotorImagery2021" role="doc-biblioref">2</a></sup></span>.</p>
<section id="why-does-crps-benefit-from-gmi" class="level2">
<h2 class="anchored" data-anchor-id="why-does-crps-benefit-from-gmi">Why Does CRPS benefit from GMI?</h2>
<ul>
<li>Compared to healthy controls, CRPS has been shown to have differences in the Primary motor cortex and primary somatosensory cortex<span class="citation" data-cites="straussGradedMotorImagery2021"><sup><a href="#ref-straussGradedMotorImagery2021" role="doc-biblioref">2</a></sup></span>.</li>
<li>Pts with upper limbs CRPSLack cortical inhibition of M1 in affected hemisphere (contra to affected hand)<span class="citation" data-cites="straussGradedMotorImagery2021"><sup><a href="#ref-straussGradedMotorImagery2021" role="doc-biblioref">2</a></sup></span>.</li>
<li>Somatosensory cortex showed reduction in intracortical inhibition<span class="citation" data-cites="straussGradedMotorImagery2021"><sup><a href="#ref-straussGradedMotorImagery2021" role="doc-biblioref">2</a></sup></span></li>
</ul>
</section>
</section>
<section id="strauss-et-al.-2021" class="level1">
<h1>Strauss et al.&nbsp;2021</h1>
<section id="design" class="level2">
<h2 class="anchored" data-anchor-id="design">Design</h2>
<ul>
<li>26 pts w CRPS</li>
<li>Randomized controlled crossover study</li>
<li>2 Groups
<ul>
<li>One group: test 6 week GMI therapy test, then 6 week wait</li>
<li>Vs test 6 week wait test then 6 week GMI therapy then test</li>
</ul></li>
<li>Pts encouraged to exercise 10 min every waking hour during 6 weeks of GMI training (ODD → could affect data???)</li>
</ul>
</section>
<section id="gmi" class="level2">
<h2 class="anchored" data-anchor-id="gmi">GMI</h2>
<p>The GMI treatment was broken down into 3 stages 1. Left right judgements App: Recognise hand Displays pics randomly and detects speed and error rate of determining R vs L 2. Imagined mvmts 3. Mirror therapy</p>
</section>
<section id="objective-measures" class="level2">
<h2 class="anchored" data-anchor-id="objective-measures">Objective measures</h2>
<ul>
<li>Pts asked to keep pain diary</li>
<li>Handedness, clinical parameters (CSS - crps severity score), quick DASH, rest pain and mvmts (clenching and unclenching fist 5x), pain via VAS, somatosensory (cutaneous sensory thresholds on first and fifth finger) and motor testing</li>
<li>Two point resolution and grating orientation task were tested</li>
<li>Manual dexterity via roeder manipulative aptitute test</li>
<li>All were tested pre, post 6 weeks then post 12 weeks</li>
<li>FMRI was also taken</li>
<li>Transcranial magnetic stimuli</li>
<li>Short intracortical inhibition and intracortical faciliaiton measurements</li>
</ul>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<section id="crps-vs-unaffected-pts-at-baseline" class="level3">
<h3 class="anchored" data-anchor-id="crps-vs-unaffected-pts-at-baseline">CRPS vs unaffected pts at baseline:</h3>
<ul>
<li>CRPS: motor performance, short intracortical inhibition and facilitation (short intracortical inhibition smaller and intracortical facilitation higher for the affected side)</li>
<li>Fmri activation magnitude in S1 ( ) was inc for mvmt of affected hand</li>
<li>No diff between sides for somatosensory measures</li>
<li>Worse performance in CRPS for graded orientation task and two point resolution</li>
<li>For TMS: short intracortical inhibition was lower in CRPS pts than in controls</li>
<li>S1 (primary somatosensory cortex) fmri activation inc in pts when compared to HC (hand control) for mvmt of affected side</li>
<li>Intracortical facilitation was not different between CRPS at baseline and HC for affected hand side.</li>
</ul>
<p>Treatment time between groups - Intervention order showed no diff - ANOVA testing showed trend for pain relief after intervention - After GMI, pain in VAS went on average from a 6.3 to a 5.0 - CSS was reduced from 12 to 11 over the GMI intervention - GMI showed dec self rated functional impairment of upper limb - Summary: pain, roeder, TPR (two point resolution), and S1 activation reduced, while SICI (inhibition) increased.</p>
<p>Baseline other things: - Longer CRPS present, worse the motor performance of affected hand - Inc mvmt pain of hand was associated w dec short intracortical inhibition and Inc s1 activation</p>
<p>After GMI - Dec in S1 activation w somatosensory stimulation (GOT gain) - Roeder , TPR , inhibition and S1 motor task all were significantly changed w GMI - FMRI confirmed changes - Primary outcome: parameter mvmt pain decreased w GMI (small effect) - Also found dec in clinical scores (CSS) , inc use of affected hand side (DASH), improvement of motor function (Roeder) and spatial tactile performance (TPR) - Intracortical inhibition incd over txt whereas fmri activation in S1 decreased (good!) - Hand representation size in affected hemisphere was modified, accompanied by mvmt pain relief - No relief of mvmt pain at follow up 6 months later</p>



</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" role="list">
<div id="ref-limakatsoEfficacyGradedMotor2023" class="csl-entry" role="listitem">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Limakatso K, Cashin AG, Williams S, Devonshire J, Parker R, McAuley JH. The <span>Efficacy</span> of <span>Graded Motor Imagery</span> and <span>Its Components</span> on <span>Phantom Limb Pain</span> and <span>Disability</span>: <span>A Systematic Review</span> and <span>Meta-Analysis</span>. <em>Canadian Journal of Pain = Revue Canadienne De La Douleur</em>. 2023;7(1):2188899. doi:<a href="https://doi.org/10.1080/24740527.2023.2188899">10.1080/24740527.2023.2188899</a></div>
</div>
<div id="ref-straussGradedMotorImagery2021" class="csl-entry" role="listitem">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Strauss S, Barby S, Härtner J, et al. Graded motor imagery modifies movement pain, cortical excitability and sensorimotor function in complex regional pain syndrome. <em>Brain Communications</em>. 2021;3(4):fcab216. doi:<a href="https://doi.org/10.1093/braincomms/fcab216">10.1093/braincomms/fcab216</a></div>
</div>
</div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-yomogida" class="csl-entry quarto-appendix-citeas" role="listitem">
<div class="">Yomogida N, Kerstein C. Graded Motor Imagery.
<a href="https://nateyomo.github.io/Yomogida-Kerstein-Lab/The Archive/Pain_science/interventions/graded_motor_imagery.html">https://nateyomo.github.io/Yomogida-Kerstein-Lab/The
Archive/Pain_science/interventions/graded_motor_imagery.html</a></div>
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>